# Announcements API Backend

A NestJS-based REST API for managing announcements with in-memory storage.

## Features

✅ **CRUD Operations** for announcements  
✅ **In-memory storage** (no database required)  
✅ **CORS enabled** for frontend integration  
✅ **TypeScript** with full type safety  
✅ **UUID-based IDs** for unique identification  
✅ **Status management** (active/closed)  
✅ **Automatic sorting** by creation date (newest first)

## Tech Stack

- **Framework**: NestJS
- **Language**: TypeScript
- **Storage**: In-memory array
- **Port**: 4000
- **CORS**: Enabled for `http://localhost:5173`

## 📋 API Endpoints

### Health Check

```http
GET /health
```

**Response:**

```json
{
  "ok": true,
  "service": "backend"
}
```

### Create Announcement

```http
POST /announcements
Content-Type: application/json

{
  "title": "Important System Maintenance",
  "description": "We will be performing scheduled maintenance this weekend."
}
```

**Response:**

```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "title": "Important System Maintenance",
  "description": "We will be performing scheduled maintenance this weekend.",
  "status": "active",
  "createdAt": "2025-09-07T11:25:46.000Z"
}
```

### Get All Announcements

```http
GET /announcements
```

**Response:**

```json
[
  {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "title": "Important System Maintenance",
    "description": "We will be performing scheduled maintenance this weekend.",
    "status": "active",
    "createdAt": "2025-09-07T11:25:46.000Z"
  }
]
```

### Update Announcement Status

```http
PATCH /announcements/:id
Content-Type: application/json

{
  "status": "closed"
}
```

**Response:**

```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "title": "Important System Maintenance",
  "description": "We will be performing scheduled maintenance this weekend.",
  "status": "closed",
  "createdAt": "2025-09-07T11:25:46.000Z"
}
```

## 🏗️ Project Structure

```
src/
├── announcements/
│   ├── dto/
│   │   ├── create-announcement.dto.ts
│   │   └── update-announcement.dto.ts
│   ├── interfaces/
│   │   └── announcement.interface.ts
│   ├── announcements.controller.ts
│   ├── announcements.service.ts
│   └── announcements.module.ts
├── app.controller.ts
├── app.module.ts
├── app.service.ts
└── main.ts
```

## 📊 Code Coverage

### Controllers

- ✅ **AnnouncementsController**: Full CRUD operations
  - `POST /announcements` - Create announcement
  - `GET /announcements` - List all announcements
  - `PATCH /announcements/:id` - Update status
- ✅ **AppController**: Health check endpoint
  - `GET /health` - Server health status

### Services

- ✅ **AnnouncementsService**: Business logic implementation
  - `create()` - Creates announcement with UUID and timestamp
  - `findAll()` - Returns sorted announcements (newest first)
  - `update()` - Updates status with validation
- ✅ **AppService**: Basic application services

### DTOs & Interfaces

- ✅ **CreateAnnouncementDto**: Input validation for POST requests
- ✅ **UpdateAnnouncementDto**: Input validation for PATCH requests
- ✅ **Announcement Interface**: Type definitions

### Modules

- ✅ **AnnouncementsModule**: Feature module encapsulation
- ✅ **AppModule**: Root module with dependency injection

### Error Handling

- ✅ **404 Not Found**: When announcement ID doesn't exist
- ✅ **Validation**: Input validation for required fields
- ✅ **CORS**: Cross-origin requests handled

## 🧪 Testing Coverage

### Unit Tests (Ready for Implementation)

```bash
# Run unit tests
npm run test

# Watch mode
npm run test:watch

# Coverage report
npm run test:cov
```

### Test Cases to Implement:

- ✅ **AnnouncementsService**
  - Should create announcement with correct structure
  - Should generate unique UUID for each announcement
  - Should set status to 'active' by default
  - Should sort announcements by creation date (newest first)
  - Should update announcement status successfully
  - Should throw NotFoundException for invalid ID

- ✅ **AnnouncementsController**
  - Should handle POST requests correctly
  - Should handle GET requests correctly
  - Should handle PATCH requests correctly
  - Should return proper HTTP status codes

### E2E Tests (Ready for Implementation)

```bash
# Run end-to-end tests
npm run test:e2e
```

### E2E Test Cases to Implement:

- ✅ **Health endpoint** should return 200 OK
- ✅ **POST /announcements** should create and return announcement
- ✅ **GET /announcements** should return array of announcements
- ✅ **PATCH /announcements/:id** should update status
- ✅ **PATCH /announcements/invalid-id** should return 404

## 🚀 Quick Start

## 🚀 Quick Start

### Prerequisites

- Node.js (v16 or higher)
- npm or yarn

### Installation

```bash
# Install dependencies
npm install

# Install additional packages (already included)
npm install uuid @types/uuid
```

### Development

```bash
# Start development server with hot reload
npm run start:dev

# Server will be available at http://localhost:4000
```

### Production

```bash
# Build the project
npm run build

# Start production server
npm run start:prod
```

## 🔧 Configuration

### CORS Setup

The API is configured to accept requests from:

- `http://localhost:5173` (Frontend development server)

To modify CORS settings, edit `src/main.ts`:

```typescript
app.enableCors({
  origin: 'http://localhost:5173',
  credentials: true,
});
```

### Port Configuration

Default port: `4000`

To change the port, modify `src/main.ts`:

```typescript
await app.listen(4000); // Change this value
```

## 📝 Usage Examples

### Using curl

```bash
# Health check
curl -X GET http://localhost:4000/health

# Create announcement
curl -X POST http://localhost:4000/announcements \
  -H "Content-Type: application/json" \
  -d '{"title":"Test","description":"Test description"}'

# Get all announcements
curl -X GET http://localhost:4000/announcements

# Update announcement status
curl -X PATCH http://localhost:4000/announcements/{id} \
  -H "Content-Type: application/json" \
  -d '{"status":"closed"}'
```

### Using Postman

1. Import the following endpoints into Postman
2. Set base URL to `http://localhost:4000`
3. Use the API endpoints documented above

## 🛠️ Development

### Adding New Features

1. Create new DTOs in `src/announcements/dto/`
2. Update interfaces in `src/announcements/interfaces/`
3. Add methods to `AnnouncementsService`
4. Add routes to `AnnouncementsController`
5. Write tests for new functionality

### Code Quality

```bash
# Lint code
npm run lint

# Format code
npm run format
```

## 🚨 Error Handling

### Common Error Responses

**404 Not Found** - Announcement doesn't exist:

```json
{
  "message": "Announcement with ID {id} not found",
  "error": "Not Found",
  "statusCode": 404
}
```

**400 Bad Request** - Invalid input:

```json
{
  "message": ["title should not be empty"],
  "error": "Bad Request",
  "statusCode": 400
}
```

## 📈 Performance Considerations

### Current Implementation

- **Storage**: In-memory array (data lost on server restart)
- **Sorting**: O(n log n) for each GET request
- **Search**: O(n) for ID-based operations

### Optimization Opportunities

- Add caching for sorted results
- Implement database persistence
- Add pagination for large datasets
- Add indexing for faster lookups

## 🔒 Security

### Current Security Features

- Input validation with DTOs
- Type safety with TypeScript
- CORS protection

### Security Enhancements for Production

- Add authentication/authorization
- Implement rate limiting
- Add input sanitization
- Add request logging
- Add HTTPS support

## 📋 TODO / Future Enhancements

- [ ] Add pagination for announcements list
- [ ] Implement search functionality
- [ ] Add announcement categories
- [ ] Add user authentication
- [ ] Add database persistence (PostgreSQL/MongoDB)
- [ ] Add caching layer (Redis)
- [ ] Add API documentation (Swagger)
- [ ] Add monitoring and logging
- [ ] Add announcement expiration dates
- [ ] Add rich text support for descriptions

## 🤝 Contributing

1. Fork the repository
2. Create a feature branch: `git checkout -b feature/new-feature`
3. Commit changes: `git commit -am 'Add new feature'`
4. Push to branch: `git push origin feature/new-feature`
5. Submit a Pull Request

## 📄 License

This project is licensed under the MIT License.

## 👥 Authors

- **Backend API** - NestJS Implementation for Announcements Management

---

**Built with ❤️ using NestJS and TypeScript**
